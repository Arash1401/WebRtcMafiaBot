<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0e27">
    <title>ุจุงุฒ ูุงูุง ุขููุงู</title>
    <link rel="stylesheet" href="styles.css">
    <!-- ูููุช ูุงุฑุณ -->
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet">
</head>
<body>
    <!-- ุตูุญู ูุฑูุฏ -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <h1 class="game-title">
                <span class="title-icon">๐ญ</span>
                <span>ุจุงุฒ ูุงูุง</span>
            </h1>
            
            <div class="login-form">
                <!-- ูุงู ฺฉุงุฑุจุฑ -->
                <div class="input-group">
                    <input type="text" id="playerName" placeholder="ูุงู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ" maxlength="20" autocomplete="off">
                    <span class="input-icon">๐ค</span>
                </div>
                
                <!-- ฺฉุฏ ุงุชุงู -->
                <div class="input-group">
                    <input type="text" id="roomCode" placeholder="ฺฉุฏ ุงุชุงู (ุงุฎุชุงุฑ)" maxlength="10" autocomplete="off">
                    <span class="input-icon">๐</span>
                </div>
                
                <!-- ุฏฺฉููโูุง -->
                <button onclick="createRoom()" class="btn-primary">
                    <span>ุณุงุฎุช ุงุชุงู ุฌุฏุฏ</span>
                    <span class="btn-icon">โ</span>
                </button>
                
                <button onclick="joinRoom()" class="btn-secondary">
                    <span>ูุฑูุฏ ุจู ุงุชุงู</span>
                    <span class="btn-icon">๐ช</span>
                </button>
            </div>
        </div>
    </div>

    <!-- ุตูุญู ุชูุธูุงุช ุงุชุงู (ุจุฑุง ุณุงุฒูุฏู) -->
    <div id="roomSettingsScreen" class="screen" style="display: none;">
        <div class="settings-container">
            <h2>โ๏ธ ุชูุธูุงุช ุงุชุงู</h2>
            
            <!-- ฺฉุฏ ุงุชุงู -->
            <div class="room-code-display">
                <span>ฺฉุฏ ุงุชุงู:</span>
                <span id="settingsRoomCode" class="code-highlight"></span>
                <button onclick="copyRoomCode()" class="copy-btn">๐</button>
            </div>
            
            <!-- ุชูุธูุงุช ุจุงุฒ -->
            <div class="settings-grid">
                <!-- ุชุนุฏุงุฏ ุจุงุฒฺฉูุงู -->
                <div class="setting-item">
                    <label>ุญุฏุงูู ุจุงุฒฺฉูุงู:</label>
                    <select id="minPlayers">
                        <option value="4">4 ููุฑ</option>
                        <option value="5">5 ููุฑ</option>
                        <option value="6" selected>6 ููุฑ</option>
                        <option value="8">8 ููุฑ</option>
                    </select>
                </div>
                
                <!-- ููุดโูุง -->
                <div class="setting-item">
                    <label>ููุดโูุง ุจุงุฒ:</label>
                    <div class="roles-config">
                        <label><input type="checkbox" checked> ูุงูุง (2)</label>
                        <label><input type="checkbox" checked> ุฏฺฉุชุฑ</label>
                        <label><input type="checkbox" checked> ฺฉุงุฑุขฺฏุงู</label>
                        <label><input type="checkbox"> ุชฺฉโุชุฑุงูุฏุงุฒ</label>
                    </div>
                </div>
                
                <!-- ุชู ุจุงุฒ -->
                <div class="setting-item">
                    <label>ุชู ุจุงุฒ:</label>
                    <select id="gameTheme">
                        <option value="classic">ฺฉูุงุณฺฉ ๐ญ</option>
                        <option value="modern">ูุฏุฑู ๐๏ธ</option>
                        <option value="fantasy">ูุงูุชุฒ ๐ง</option>
                    </select>
                </div>
                
                <!-- ฺฏุฑุฏุงููุฏู ุจุงุฒ -->
                <div class="setting-item">
                    <label>ฺฏุฑุฏุงููุฏู ุจุงุฒ:</label>
                    <select id="gameMaster">
                        <option value="auto">ุฑุจุงุช (ุงุชููุงุชฺฉ) ๐ค</option>
                        <option value="player">ุจุงุฒฺฉู ๐ค</option>
                    </select>
                </div>
                
                <!-- ููุน ุจุงุฒ -->
                <div class="setting-item">
                    <label>ููุน ุงุฑุชุจุงุท:</label>
                    <div class="connection-type">
                        <label><input type="checkbox" id="videoEnabled" checked> ูุฏู ๐น</label>
                        <label><input type="checkbox" id="audioEnabled" checked> ุตุฏุง ๐๏ธ</label>
                        <label><input type="checkbox" checked disabled> ฺุช ๐ฌ</label>
                    </div>
                </div>
                
                <!-- ฺฉูุช -->
                <div class="setting-item">
                    <label>ฺฉูุช ูุฏู:</label>
                    <select id="videoQuality">
                        <option value="low">ูพุงู (ุงูุชุฑูุช ุถุนู)</option>
                        <option value="medium" selected>ูุชูุณุท</option>
                        <option value="high">ุจุงูุง</option>
                    </select>
                </div>
            </div>
            
            <button onclick="saveSettingsAndContinue()" class="btn-primary btn-large">
                <span>ุฐุฎุฑู ู ุงุฏุงูู</span>
                <span>โ</span>
            </button>
        </div>
    </div>

    <!-- ุตูุญู ุงุตู ุจุงุฒ -->
    <div id="gameScreen" class="screen" style="display: none;">
        <!-- ูุฏุฑ ุจุงุฒ -->
        <div class="game-header">
            <div class="header-left">
                <!-- ุฏฺฉูู ุฏุจุงฺฏ ููุท ุจุฑุง ุณุงุฒูุฏู -->
                <button onclick="toggleDebugPanel()" class="icon-btn debug-btn" title="ุฏุจุงฺฏ" style="display: none;">๐</button>
                <!-- ูพูู ฺฏุงุฏ ููุท ุจุฑุง ฺฏุฑุฏุงููุฏู -->
                <button onclick="toggleGodPanel()" class="icon-btn god-btn" title="ูพูู ูุฏุฑุช" style="display: none;">๐</button>
                <button onclick="toggleChat()" class="icon-btn chat-toggle" title="ฺุช">
                    ๐ฌ
                    <span class="badge" id="unreadCount" style="display: none;">0</span>
                </button>
            </div>
            
            <div class="header-center">
                <div class="connection-info">
                    <span class="room-code">ุงุชุงู: <span id="roomCodeDisplay"></span></span>
                    <span class="players-count">
                        <span id="onlinePlayersCount">0</span>/<span id="maxPlayersCount">12</span> ๐ฅ
                    </span>
                    <span id="connectionStatus" class="status-badge">ุขููุงู</span>
                </div>
            </div>
            
            <div class="header-right">
                <button onclick="toggleSettings()" class="icon-btn" title="ุชูุธูุงุช">โ๏ธ</button>
                <button onclick="toggleFullscreen()" class="icon-btn" title="ุชูุงู ุตูุญู">โถ</button>
                <button onclick="leaveGame()" class="icon-btn leave-btn" title="ุฎุฑูุฌ">๐ช</button>
            </div>
        </div>

        <!-- ฺฉุงูุชูุฑ ุงุตู ุจุงุฒ -->
        <div class="game-container">
            <!-- ูุฒ ุจุงุฒ -->
            <div class="game-table-wrapper">
                <div class="game-table" id="gameTable">
                    <!-- ูุญุชูุง ุฑู ูุฒ -->
                    <div class="table-content">
                        <div id="gamePhase" class="phase-display">
                            <span class="phase-icon">๐</span>
                            <span class="phase-text">ููุชุธุฑ ุจุงุฒฺฉูุงู...</span>
                        </div>
                        
                        <div id="gameTimer" class="game-timer" style="display: none;">
                            <span class="timer-value">00:00</span>
                        </div>
                        
                        <div id="gameEvents" class="game-events">
                            <!-- ุฑูุฏุงุฏูุง ุจุงุฒ -->
                        </div>
                        
                        <button id="startGameBtn" onclick="startGame()" class="btn-start" style="display: none;">
                            <span>ุดุฑูุน ุจุงุฒ</span>
                            <span class="player-ready-count">(0/0)</span>
                        </button>
                    </div>
                    
                    <!-- ุฌุงฺฏุงู ุจุงุฒฺฉูุงู ุฏูุฑ ูุฒ -->
                    <div id="playersSeats" class="players-seats">
                        <!-- 12 ุฌุงฺฏุงู ุจุฑุง ุจุงุฒฺฉูุงู -->
                        <!-- ุฌุงฺฏุงูโูุง ุจู ุตูุฑุช ุฏุงูุงูฺฉ ุงุถุงูู ูโุดููุฏ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ูพูู ฺุช -->
        <div id="chatPanel" class="side-panel chat-panel collapsed">
            <div class="panel-header" onclick="toggleChat()">
                <span class="panel-title">๐ฌ ฺุช ฺฏุฑูู</span>
                <span class="panel-arrow">โ</span>
            </div>
            <div class="panel-content">
                <div id="messages" class="messages"></div>
                <div class="message-input-container">
                    <input type="text" id="messageInput" placeholder="ูพุงู ุฎูุฏ ุฑุง ุจููุณุฏ..." maxlength="200">
                    <button onclick="sendMessage()" class="send-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M2 21l21-9L2 3v7l15 2-15 2v7z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- ูพูู ูุฏุฑุช ฺฏุงุฏ -->
        <div id="godPanel" class="side-panel god-panel collapsed">
            <div class="panel-header" onclick="toggleGodPanel()">
                <span class="panel-title">๐ ูพูู ูุฏุฑุช</span>
                <span class="panel-arrow">โ</span>
            </div>
            <div class="panel-content">
                <!-- ูุณุช ุจุงุฒฺฉูุงู -->
                <div class="god-section">
                    <h3>ุจุงุฒฺฉูุงู:</h3>
                    <div id="godPlayersList" class="god-players-list">
                        <!-- ูุณุช ุจุงุฒฺฉูุงู ุจุง ฺฉูุชุฑูโูุง -->
                    </div>
                </div>
                
                <!-- ฺฉูุชุฑูโูุง ุจุงุฒ -->
                <div class="god-section">
                    <h3>ฺฉูุชุฑู ุจุงุฒ:</h3>
                    <div class="god-controls">
                        <button onclick="godStartDay()" class="god-btn">โ๏ธ ุดุฑูุน ุฑูุฒ</button>
                        <button onclick="godStartNight()" class="god-btn">๐ ุดุฑูุน ุดุจ</button>
                        <button onclick="godStartVoting()" class="god-btn">๐ณ๏ธ ุฑุงโฺฏุฑ</button>
                        <button onclick="godPauseGame()" class="god-btn">โธ๏ธ ูฺฉุซ</button>
                    </div>
                </div>
                
                <!-- ุชุงูุฑ -->
                <div class="god-section">
                    <h3>ุชุงูุฑ:</h3>
                    <div class="timer-controls">
                        <input type="number" id="godTimerMinutes" min="0" max="10" value="2">
                        <span>ุฏููู</span>
                        <button onclick="godSetTimer()" class="god-btn-small">ุชูุธู</button>
                    </div>
                </div>
                
                <!-- ุฑูุฏุงุฏูุง -->
                <div class="god-section">
                    <h3>ุซุจุช ุฑูุฏุงุฏ:</h3>
                    <textarea id="godEventText" placeholder="ุฑูุฏุงุฏ ุฌุฏุฏ..."></textarea>
                    <button onclick="godLogEvent()" class="god-btn">ุซุจุช</button>
                </div>
            </div>
        </div>

        <!-- ูพูู ุฏุจุงฺฏ -->
        <div id="debugPanel" class="debug-panel" style="display: none;">
            <div class="debug-header">
                <span>๐ Debug Console</span>
                <button onclick="toggleDebugPanel()" class="close-btn">โ</button>
            </div>
            <div class="debug-tabs">
                <button class="debug-tab active" onclick="switchDebugTab('logs')">Logs</button>
                <button class="debug-tab" onclick="switchDebugTab('connections')">Connections</button>
                <button class="debug-tab" onclick="switchDebugTab('stats')">Stats</button>
            </div>
            <div id="debugContent" class="debug-content">
                <div id="debugLogs" class="debug-logs"></div>
            </div>
            <div class="debug-actions">
                <button onclick="clearDebugLogs()">Clear</button>
                <button onclick="debugConnections()">Check Status</button>
                <button onclick="forceReconnectAll()">Force Reconnect</button>
                <button onclick="testConnection()">Test Connection</button>
            </div>
        </div>

        <!-- ูพูู ุชูุธูุงุช ุณุฑุน -->
        <div id="quickSettings" class="quick-settings" style="display: none;">
            <h3>ุชูุธูุงุช ุณุฑุน</h3>
            <div class="settings-list">
                <label>
                    <input type="checkbox" id="muteAll" onchange="toggleMuteAll()">
                    <span>ูุทุน ุตุฏุง ููู</span>
                </label>
                <label>
                    <input type="checkbox" id="hideVideos" onchange="toggleHideVideos()">
                    <span>ูุฎู ฺฉุฑุฏู ูุฏููุง</span>
                </label>
                <label>
                    <span>ฺฉูุช ูุฏู:</span>
                    <select id="quickVideoQuality" onchange="changeVideoQuality()">
                        <option value="low">ูพุงู</option>
                        <option value="medium">ูุชูุณุท</option>
                        <option value="high">ุจุงูุง</option>
                    </select>
                </label>
            </div>
            <button onclick="toggleSettings()" class="close-settings">ุจุณุชู</button>
        </div>

        <!-- ูุฏู ุจุฒุฑฺฏ ุดุฏู -->
        <div id="enlargedVideo" class="enlarged-video" style="display: none;" onclick="closeEnlargedVideo()">
            <video id="enlargedVideoElement" autoplay playsinline></video>
            <div class="enlarged-info">
                <span id="enlargedPlayerName"></span>
                <button class="close-video" onclick="closeEnlargedVideo()">โ</button>
            </div>
        </div>

        <!-- ููุงุด ููุชูฺฉุดู -->
        <div id="notifications" class="notifications"></div>
    </div>

    <!-- ููุฏูฺฏ -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <span id="loadingText">ุฏุฑ ุญุงู ุงุชุตุงู...</span>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@microsoft/signalr@latest/dist/browser/signalr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/adapter-latest@latest/adapter.min.js"></script>
    <script src="game.js"></script>
</body>
</html>
