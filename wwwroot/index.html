<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ุจุงุฒ ูุงูุง ุขููุงู</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- ุตูุญู ูุฑูุฏ -->
    <div id="loginScreen" class="screen">
        <div class="login-container">
            <h1>๐ญ ุจุงุฒ ูุงูุง</h1>
            <div class="login-form">
                <input type="text" id="playerName" placeholder="ูุงู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ" maxlength="20">
                <input type="text" id="roomCode" placeholder="ฺฉุฏ ุงุชุงู" maxlength="10">
                <button onclick="joinGame()" class="btn-primary">ูุฑูุฏ ุจู ุจุงุฒ</button>
            </div>
        </div>
    </div>

    <!-- ุตูุญู ุจุงุฒ -->
    <div id="gameScreen" class="screen" style="display: none;">
        <!-- ูุฏุฑ ุจุงุฒ -->
        <div class="game-header">
            <div class="header-left">
                <button onclick="toggleDebugPanel()" class="icon-btn" title="ุฏุจุงฺฏ">๐</button>
                <button onclick="toggleChat()" class="icon-btn chat-toggle" title="ฺุช">๐ฌ</button>
                <span class="badge" id="unreadCount" style="display: none;">0</span>
            </div>
            
            <div class="header-center">
                <span class="room-code">ุงุชุงู: <span id="roomCodeDisplay"></span></span>
                <span id="connectionStatus" class="status-badge">ุขููุงู</span>
            </div>
            
            <div class="header-right">
                <button onclick="toggleFullscreen()" class="icon-btn" title="ุชูุงู ุตูุญู">โถ</button>
            </div>
        </div>

        <!-- ูุฒ ุจุงุฒ -->
        <div class="game-table-container">
            <div class="game-table" id="gameTable">
                <div class="table-center">
                    <div id="gamePhase" class="phase-display">ููุชุธุฑ ุดุฑูุน ุจุงุฒ...</div>
                    <button id="startGameBtn" onclick="startGame()" class="btn-start">ุดุฑูุน ุจุงุฒ</button>
                    <div id="gameActions" class="game-actions" style="display: none;">
                        <!-- ุฏฺฉููโูุง ุนููุงุช ุจุงุฒ -->
                    </div>
                </div>
                
                <!-- ุฌุงฺฏุงู ุจุงุฒฺฉูุงู ุฏูุฑ ูุฒ -->
                <div id="playersCircle" class="players-circle">
                    <!-- ุจุงุฒฺฉู ูุญู -->
                    <div class="player-seat local-player" id="localPlayerSeat">
                        <div class="video-circle" onclick="toggleVideoSize(this)">
                            <video id="localVideo" autoplay muted playsinline></video>
                        </div>
                        <span class="player-name">ุดูุง</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ูพูู ฺุช -->
        <div id="chatPanel" class="chat-panel collapsed">
            <div class="chat-header" onclick="toggleChat()">
                <span>๐ฌ ฺุช</span>
                <span class="chat-arrow">โ</span>
            </div>
            <div class="chat-content">
                <div id="messages" class="messages"></div>
                <div class="message-input-container">
                    <input type="text" id="messageInput" placeholder="ูพุงู ุฎูุฏ ุฑุง ุจููุณุฏ...">
                    <button onclick="sendMessage()" class="send-btn">โค</button>
                </div>
            </div>
        </div>

        <!-- ูพูู ุฏุจุงฺฏ -->
        <div id="debugPanel" class="debug-panel" style="display: none;">
            <div class="debug-header">
                <span>๐ Debug Console</span>
                <button onclick="toggleDebugPanel()" class="close-btn">โ</button>
            </div>
            <div id="debugLogs" class="debug-logs"></div>
            <div class="debug-actions">
                <button onclick="clearDebugLogs()">Clear</button>
                <button onclick="debugConnections()">Check Connections</button>
                <button onclick="retryAllConnections()">Retry All</button>
            </div>
        </div>

        <!-- ูุฏู ุจุฒุฑฺฏ ุดุฏู -->
        <div id="enlargedVideo" class="enlarged-video" style="display: none;" onclick="closeEnlargedVideo()">
            <video id="enlargedVideoElement" autoplay playsinline></video>
            <span class="close-video">โ</span>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@microsoft/signalr@latest/dist/browser/signalr.min.js"></script>
    <script src="game.js"></script>
</body>
</html>
